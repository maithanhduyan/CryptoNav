version: "3"

services:
  cryptonav-ui:
    build:
      context: .
      dockerfile: ./ui/Dockerfile
      # args:
      #   - USERNAME=vscode
      #   - USER_UID=1000
      #   - USER_GID=1000
      target: development
    container_name: cryptonav-ui
    # user: vscode
    ports:
      - "3000:3000"
    volumes:
      # Mount the root folder that contains .git
      - .:/workspace:cached
    restart: unless-stopped

    # Overrides default command so things don't shut down after the process ends.
    command: /bin/sh -c "while sleep 1000; do :; done"

  cryptonav-api:
    container_name: cryptonav-api
    # image: cryptonav-api:lastest
    build:
      context: .
      dockerfile: ./server/Dockerfile
      target: development
    #   args:
    #     - USERNAME=vscode
    #     - USER_UID=1000
    #     - USER_GID=1000
    # user: vscode
    ports:
      - "8000:8000"
    volumes:
      # Mount the root folder that contains .git
      - .:/workspace:cached
    restart: unless-stopped

    # Overrides default command so things don't shut down after the process ends.
    command: /bin/sh -c "while sleep 1000; do :; done"
